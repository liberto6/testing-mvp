# ============================================
# VERBA - RunPOD Configuration Template
# ============================================
#
# Este es un template de configuración optimizado para RunPOD.
# Copia este archivo a .env y ajusta los valores según tu setup.
#
# IMPORTANTE: NUNCA subas .env a Git (contiene secretos)
#
# Uso:
#   cp .env.runpod.example .env
#   nano .env
#

# ========== API Keys ==========
# Obtén tu API key en: https://console.groq.com
GROQ_API_KEY=your_groq_api_key_here

# ========== TTS Engine Selection ==========
# Opciones disponibles: "vibevoice", "kokoro", "f5-tts"
#
# vibevoice = Microsoft VibeVoice (alta calidad, streaming, GPU recomendada)
# kokoro = Kokoro-82M (rápido, CPU-friendly)
# f5-tts = F5-TTS (máxima calidad, requiere audio de referencia)
#
TTS_ENGINE=vibevoice

# ========== VibeVoice TTS Config ==========
# Solo aplica si TTS_ENGINE=vibevoice

# Voz por defecto
# Voces disponibles: Wayne, Sarah, y otros .pt files en VIBEVOICE_VOICES_DIR
VIBEVOICE_VOICE=Wayne

# Directorio de voces en RunPOD
# IMPORTANTE: Esta ruta es específica para persistent storage en /workspace
VIBEVOICE_VOICES_DIR=/workspace/VibeVoice/demo/voices/streaming_model

# Classifier-Free Guidance Scale (1.0 - 3.0)
# 1.0 = Más estable, menos expresivo
# 1.5 = Balance (recomendado para RunPOD)
# 2.0-3.0 = Más expresivo, puede ser inestable
VIBEVOICE_CFG_SCALE=1.5

# DDPM Inference Steps (3 - 50)
# 3 = Muy rápido, calidad reducida (RTF ~0.05x en RTX 3090)
# 5 = Balance (recomendado para RunPOD) (RTF ~0.08x)
# 10 = Alta calidad (RTF ~0.15x)
# 20 = Muy alta calidad (RTF ~0.30x)
VIBEVOICE_DDPM_STEPS=5

# ========== Kokoro TTS Config ==========
# Solo aplica si TTS_ENGINE=kokoro
KOKORO_VOICE=af_sarah

# ========== HuggingFace Cache ==========
# Ubicación del cache de modelos de HuggingFace
# En RunPOD, usar persistent storage para evitar re-descargas
HF_HOME=/workspace/.cache/huggingface

# ========== RunPOD Specific Settings ==========

# Logging Level
# DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# Server Port (debe coincidir con puerto expuesto en RunPOD)
PORT=8000

# Workers (para uvicorn)
# Recomendado: 1 para GPUs compartidas, 2-4 para GPUs dedicadas
WORKERS=1

# ========== Performance Tuning ==========

# CUDA Optimizations (solo si tienes GPU NVIDIA)
# Habilitar para mejor performance
CUDA_LAUNCH_BLOCKING=0
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512

# ========== Optional: Advanced Settings ==========

# Max Cache Size para TTS (en número de entradas)
MAX_CACHE_SIZE=1000

# ThreadPool Workers (para operaciones asíncronas)
EXECUTOR_MAX_WORKERS=3

# ========== Notas de Optimización para RunPOD ==========
#
# Para RTX 3090 / RTX 4090:
#   VIBEVOICE_CFG_SCALE=1.5
#   VIBEVOICE_DDPM_STEPS=5
#   Resultado: RTF ~0.08x, excelente calidad
#
# Para A100:
#   VIBEVOICE_CFG_SCALE=2.0
#   VIBEVOICE_DDPM_STEPS=10
#   Resultado: RTF ~0.10x, máxima calidad
#
# Para GPUs con < 8GB VRAM:
#   VIBEVOICE_CFG_SCALE=1.0
#   VIBEVOICE_DDPM_STEPS=3
#   Resultado: RTF ~0.05x, reduce uso de memoria
#
# Para desarrollo/testing:
#   TTS_ENGINE=kokoro
#   (Más rápido, no requiere GPU potente)
#
# ========== Troubleshooting ==========
#
# Si obtienes CUDA OOM (Out of Memory):
#   1. Reduce VIBEVOICE_DDPM_STEPS a 3
#   2. Cambia a GPU con más VRAM
#   3. O usa TTS_ENGINE=kokoro
#
# Si la latencia es muy alta:
#   1. Verifica que estás usando GPU (nvidia-smi)
#   2. Reduce VIBEVOICE_DDPM_STEPS
#   3. Asegúrate de que Flash Attention 2 esté instalado
#
# Si las voces no se encuentran:
#   1. Verifica que /workspace/VibeVoice existe
#   2. ls /workspace/VibeVoice/demo/voices/streaming_model/
#   3. Ajusta VIBEVOICE_VOICES_DIR si es necesario
#
# Para más ayuda, ver:
#   - RUNPOD_DEPLOYMENT.md
#   - README_VIBEVOICE.md
#   - https://github.com/microsoft/VibeVoice
#
